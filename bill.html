<!DOCTYPE HTML>
<html lang="zh-tw">
	<head>
		<title>發票計算機|永丞門窗</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="統一發票稅金計算機">
		<link rel="icon" href="images/favicon.png" type="image/png">
		<link rel="icon" href="images/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="assets/css/stylesheet.css"/>
		<link rel="stylesheet" href="assets/css/mobile.css" media="only screen and (max-width: 768px)"/> 
	</head>
	<!-- main -->
	<body>
		<!-- Header -->
		<header class="header">
			<h1><a href="/" class="logo"><b>永丞門窗</b></a></h1>
			<nav>
				<ul>
					<li><a href="/"><b>首頁</b></a></li>
					<li><a href="aboutme.html"><b>關於永丞</b></a></li>
					<li class="dropdown-parent">
						<span class="opener"><b>產品系列</b></span>
						<ul class="dropdown">
							<li><a href="product_window.html"><strong>理想隔音窗</strong></a></li>
							<li><a href="product_door.html"><strong>三合一通風門</strong></a></li>
							<li><a href="product_mesh.html"><strong>防霾紗窗</strong></a></li>
						</ul>
					</li>
				</ul>
			</nav>
		</header>
		<!-- container -->
        <div class="calculator">
            <div class="container">
                <h2>發票計算機</h2>

                <div class="row">
                    <label for="net">未稅金額:</label>
                    <input type="number" id="net" placeholder="輸入未稅價">
                </div>
                <div class="row">
                    <label>稅金:</label>
                    <span id="tax">0</span>
                </div>
                <div class="row">
                    <label for="gross">含稅金額:</label>
                    <input type="number" id="gross" placeholder="輸入含稅價">
                </div>
                <div class="row">
                    <label>中文金額:</label>
                    <span id="chineseAmount">零元整</span>
                </div>
            </div>
        </div>

		<!-- footer -->
		<footer class="footer">
			<h2>永丞門窗</h2>
			<ul class="contact">
				<li class="row"><h3>聯絡我們</h3></li>
				<li class="row">
					<div class="item"><a href="tel:0908659158"><b>TEL:0908-659158</b></a></div>
					<div class="item"><a href="tel:0426936899"><strong>FAX:(04)2693-6899</strong></a></div>
				</li>
				<li class="row">
					<div class="item"><b><a href="mailto:shucheng0731@gmail.com">shucheng0731@gmail.com</a></b></div>
					<div class="item"><strong><a href="https://maps.app.goo.gl/yVXV9Yqr1T6EVQnX8">43245 台中市大肚區沙田路一段148-9號</a></strong></div>
				</li>
			</ul>				
		</footer>

        <script>
            const netInput = document.getElementById("net");
            const grossInput = document.getElementById("gross");
            const taxOutput = document.getElementById("tax");
            const chineseAmount = document.getElementById("chineseAmount");

            const TAX_RATE = 0.05;

            // 數字轉中文金額
            function numberToChinese(n) {
                if (!n || n <= 0) return "零元整";
                const fraction = ['角', '分'];
                const digit = ['零','壹','貳','參','肆','伍','陸','柒','捌','玖'];
                const unit = [['元','萬','億'],['','拾','佰','仟']];
                let head = n < 0 ? '負' : '';
                n = Math.abs(n);

                let s = '';
                for (let i = 0; i < fraction.length; i++) {
                    s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
                }
                s = s || '整';
                n = Math.floor(n);

                for (let i = 0; i < unit[0].length && n > 0; i++) {
                    let p = '';
                    for (let j = 0; j < unit[1].length && n > 0; j++) {
                        p = digit[n % 10] + unit[1][j] + p;
                        n = Math.floor(n / 10);
                    }
                    s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
                }
                return head + s.replace(/(零.)*零元/, '元')
                               .replace(/(零.)+/g, '零')
                               .replace(/^整$/, '零元整');
            }

            // 計算邏輯
            function calculateFromNet() {
                let net = parseFloat(netInput.value);
                if (isNaN(net)) return;
                let tax = Math.round(net * TAX_RATE);
                let gross = net + tax;
                taxOutput.textContent = tax;
                grossInput.value = gross;
                chineseAmount.textContent = numberToChinese(gross);
            }

            function calculateFromGross() {
                let gross = parseFloat(grossInput.value);
                if (isNaN(gross)) return;
                let net = Math.round(gross / (1 + TAX_RATE));
                let tax = gross - net;
                netInput.value = net;
                taxOutput.textContent = tax;
                chineseAmount.textContent = numberToChinese(gross);
            }

            netInput.addEventListener("input", calculateFromNet);
            grossInput.addEventListener("input", calculateFromGross);
        </script>
	</body>
</html>